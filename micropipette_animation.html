<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Micropipette æ­£å‘/åå‘å¸æ¶²å‹•ç•«æ•™å­¸</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel:#101a33;
      --text:#e9eefc;
      --muted:#b8c4e6;
      --border:rgba(255,255,255,.12);

      --f-fill:#D6EAF8;  /* forward background */
      --f-stroke:#2E86C1;
      --r-fill:#FDEBD0;  /* reverse background */
      --r-stroke:#CA6F1E;

      --ok:#38d39f;
      --warn:#ffcc66;
      --bad:#ff6b6b;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Arial, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", sans-serif;
      background: radial-gradient(1200px 600px at 20% 0%, #182454 0%, var(--bg) 60%);
      color:var(--text);
    }

    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:20px 16px 28px;
    }

    header{
      display:flex;
      flex-direction:column;
      gap:6px;
      margin-bottom:14px;
    }
    header h1{
      font-size:20px;
      margin:0;
      letter-spacing:.2px;
    }
    header p{
      margin:0;
      color:var(--muted);
      font-size:14px;
      line-height:1.5;
    }

    .toolbar{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin:14px 0 16px;
      padding:12px;
      border:1px solid var(--border);
      border-radius:12px;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    }

    .leftControls, .rightControls{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
    }

    .pill{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      color:var(--muted);
      font-size:12px;
      user-select:none;
      white-space:nowrap;
    }

    .btn{
      appearance:none;
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:8px 10px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      letter-spacing:.2px;
      transition:transform .04s ease, background .15s ease, border-color .15s ease;
    }
    .btn:hover{ background:rgba(255,255,255,.10) }
    .btn:active{ transform:translateY(1px) }
    .btn.primary{
      border-color:rgba(255,255,255,.22);
      background:rgba(255,255,255,.12);
    }
    .btn.danger{
      border-color:rgba(255,107,107,.35);
      background:rgba(255,107,107,.14);
    }

    .stepInfo{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .stepBadge{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      font-size:12px;
      color:var(--muted);
    }

    .grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:14px;
    }

    @media (max-width: 920px){
      .grid{ grid-template-columns:1fr; }
      .stepInfo{ justify-content:flex-start; }
    }

    .card{
      border:1px solid var(--border);
      border-radius:14px;
      overflow:hidden;
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
    }

    .cardHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:12px 12px 10px;
      border-bottom:1px solid var(--border);
      gap:10px;
    }
    .cardHead .title{
      display:flex;
      flex-direction:column;
      gap:4px;
      min-width:0;
    }
    .tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:800;
      letter-spacing:.2px;
      font-size:15px;
    }
    .tag .dot{
      width:10px;height:10px;border-radius:50%;
      background:var(--f-stroke);
      box-shadow:0 0 0 3px rgba(46,134,193,.18);
      flex:0 0 auto;
    }
    .tag.reverse .dot{
      background:var(--r-stroke);
      box-shadow:0 0 0 3px rgba(202,111,30,.20);
    }
    .subtitle{
      font-size:12px;
      color:var(--muted);
      line-height:1.45;
    }

    .cardBody{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      padding:12px;
    }

    @media (max-width: 520px){
      .cardBody{ grid-template-columns:1fr; }
    }

    .viz{
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.18);
      padding:12px;
      position:relative;
      min-height:290px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .notes{
      border-radius:12px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.12);
      padding:12px;
      min-height:290px;
    }
    .notes h3{
      margin:0 0 8px;
      font-size:14px;
      letter-spacing:.2px;
    }
    .notes ul{
      margin:0;
      padding-left:18px;
      color:var(--text);
      line-height:1.6;
      font-size:13px;
    }
    .notes li{ margin:6px 0 }
    .muted{ color:var(--muted) }

    /* ===== Micropipette SVG-ish drawing with divs ===== */
    .scene{
      width:260px;
      height:260px;
      position:relative;
      transform:translateY(-4px);
    }

    .tube{
      position:absolute;
      left:50%;
      top:38px;
      width:58px;
      height:130px;
      transform:translateX(-50%);
      border-radius:14px;
      border:2px solid rgba(255,255,255,.35);
      background:rgba(255,255,255,.06);
      overflow:hidden;
    }

    .plunger{
      position:absolute;
      left:50%;
      top:10px;
      width:70px;
      height:40px;
      transform:translateX(-50%);
      border-radius:12px;
      border:2px solid rgba(255,255,255,.35);
      background:rgba(255,255,255,.08);
    }
    .plunger::after{
      content:"";
      position:absolute;
      left:50%;
      top:8px;
      width:34px;
      height:22px;
      transform:translateX(-50%);
      border-radius:10px;
      background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.25);
    }

    .tip{
      position:absolute;
      left:50%;
      top:168px;
      width:50px;
      height:74px;
      transform:translateX(-50%);
      clip-path: polygon(16% 0%, 84% 0%, 62% 100%, 38% 100%);
      border:2px solid rgba(255,255,255,.35);
      background:rgba(255,255,255,.05);
      overflow:hidden;
    }

    .liquid{
      position:absolute;
      left:0;
      bottom:0;
      width:100%;
      height:0%;
      background:linear-gradient(180deg, rgba(80,200,255,.55), rgba(80,200,255,.25));
      transition:height .35s ease;
    }

    .liquid.reverse{
      background:linear-gradient(180deg, rgba(255,175,80,.60), rgba(255,175,80,.25));
    }

    .beaker{
      position:absolute;
      left:50%;
      bottom:6px;
      width:210px;
      height:74px;
      transform:translateX(-50%);
      border-radius:14px 14px 18px 18px;
      border:2px solid rgba(255,255,255,.25);
      background:rgba(255,255,255,.04);
      overflow:hidden;
    }
    .beaker .bath{
      position:absolute;
      left:0; bottom:0;
      width:100%; height:58%;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.01));
    }

    .label{
      position:absolute;
      left:10px;
      top:8px;
      font-size:12px;
      color:var(--muted);
      letter-spacing:.2px;
    }

    .arrow{
      position:absolute;
      left:50%;
      top:92px;
      transform:translateX(-50%);
      font-size:12px;
      color:var(--muted);
      opacity:.0;
      transition:opacity .2s ease;
      user-select:none;
    }

    .callout{
      position:absolute;
      top:6px;
      right:10px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      font-size:12px;
      color:var(--muted);
      background:rgba(0,0,0,.18);
    }

    /* Color frames for each mode */
    .frame.forward{
      box-shadow: inset 0 0 0 2px rgba(46,134,193,.55), 0 10px 28px rgba(0,0,0,.35);
    }
    .frame.reverse{
      box-shadow: inset 0 0 0 2px rgba(202,111,30,.55), 0 10px 28px rgba(0,0,0,.35);
    }

    .legend{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      margin-top:10px;
      font-size:12px;
      color:var(--muted);
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.05);
    }
    .chip .dot{
      width:10px;height:10px;border-radius:50%;
      background:var(--f-stroke);
      box-shadow:0 0 0 3px rgba(46,134,193,.18);
    }
    .chip.r .dot{
      background:var(--r-stroke);
      box-shadow:0 0 0 3px rgba(202,111,30,.20);
    }

    /* ===== step animations (via data-step) ===== */
    .scene[data-step="0"] .arrow{ opacity:0 }
    .scene[data-step="1"] .arrow{ opacity:1 }
    .scene[data-step="2"] .arrow{ opacity:1 }
    .scene[data-step="3"] .arrow{ opacity:1 }

    /* plunger movement */
    .scene .plunger{
      transition: transform .35s ease;
    }
    .scene[data-step="1"] .plunger{ transform:translateX(-50%) translateY(10px) }  /* press */
    .scene[data-step="2"] .plunger{ transform:translateX(-50%) translateY(0px) }   /* release */
    .scene[data-step="3"] .plunger{ transform:translateX(-50%) translateY(14px) }  /* dispense */

    /* tip dipping indicator */
    .scene .beaker{
      transition: transform .35s ease;
    }
    .scene[data-step="1"] .beaker{ transform:translateX(-50%) translateY(-4px) }
    .scene[data-step="2"] .beaker{ transform:translateX(-50%) translateY(-4px) }

    /* bubble hint */
    .bubble{
      position:absolute;
      left:50%;
      top:210px;
      width:8px;height:8px;
      transform:translateX(-50%);
      border-radius:50%;
      background:rgba(255,255,255,.0);
      opacity:0;
      transition: opacity .2s ease;
    }
    .scene.bubbleOn .bubble{
      opacity:1;
      background:rgba(255,255,255,.35);
      animation: floatUp 1.2s ease-in-out infinite;
    }
    @keyframes floatUp{
      0%{ transform:translateX(-50%) translateY(0px); opacity:.15 }
      60%{ opacity:.35 }
      100%{ transform:translateX(-50%) translateY(-18px); opacity:0 }
    }

    /* small footer */
    footer{
      margin-top:14px;
      color:var(--muted);
      font-size:12px;
      line-height:1.5;
      opacity:.95;
    }
    footer code{
      color:#d9e5ff;
      background:rgba(255,255,255,.06);
      padding:2px 6px;
      border-radius:8px;
      border:1px solid var(--border);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <h1>Micropipette æ“ä½œå‹•ç•«ï¼šæ­£å‘å¸æ¶²ï¼ˆğŸŸ¦ï¼‰èˆ‡åå‘å¸æ¶²ï¼ˆğŸŸ§ï¼‰</h1>
      <p>ç›®çš„ï¼šè®“æ–°æ‰‹åˆ†æå“¡ç”¨ã€Œé¡è‰² + Step å‹•ç•«ã€å¿«é€Ÿç†è§£å¸æ¶²æ–¹å¼å·®ç•°ï¼Œé™ä½å› æ“ä½œèª¤è§£é€ æˆçš„äººç‚º OOSã€‚</p>
    </header>

    <div class="toolbar">
      <div class="leftControls">
        <button class="btn primary" id="prevBtn">ä¸Šä¸€æ­¥</button>
        <button class="btn primary" id="nextBtn">ä¸‹ä¸€æ­¥</button>
        <button class="btn" id="playBtn">è‡ªå‹•æ’­æ”¾</button>
        <button class="btn danger" id="resetBtn">é‡è¨­</button>
      </div>
      <div class="stepInfo">
        <span class="stepBadge" id="stepBadge">Step 0ï¼šé¸æ“‡å¸æ¶²æ–¹å¼</span>
        <span class="pill">æç¤ºï¼šæ­£å‘ï¼ç¬¬ä¸€æ®µå¸/ç¬¬äºŒæ®µå¹ï¼›åå‘ï¼ç¬¬äºŒæ®µå¸/ç¬¬ä¸€æ®µæ”¾ï¼ˆä¸å¹ï¼‰</span>
      </div>
    </div>

    <div class="grid">
      <!-- Forward -->
      <section class="card">
        <div class="cardHead">
          <div class="title">
            <div class="tag">
              <span class="dot" aria-hidden="true"></span>
              <span>æ­£å‘å¸æ¶²ï¼ˆForward Pipettingï¼‰</span>
            </div>
            <div class="subtitle">é©ç”¨ï¼šæ°´æ€§ã€ä½é»åº¦ã€ä¸æ˜“èµ·æ³¡ã€‚é‡é»ï¼šç¬¬ä¸€æ®µå¸æ¶²ï¼Œæ”¾æ¶²éœ€åˆ°ç¬¬äºŒæ®µå¹å‡ºæ®˜æ¶²ã€‚</div>
          </div>
          <div class="pill">é¡è‰²ï¼šğŸŸ¦ è—è‰²æµç¨‹</div>
        </div>

        <div class="cardBody">
          <div class="viz frame forward">
            <div class="callout" id="fMode">ğŸŸ¦ æ­£å‘</div>
            <div class="scene" id="sceneForward" data-step="0">
              <div class="label">å¸é ­ / æ´»å¡ç¤ºæ„</div>
              <div class="plunger"></div>
              <div class="tube">
                <div class="liquid" id="fTubeLiquid"></div>
              </div>
              <div class="tip">
                <div class="liquid" id="fTipLiquid"></div>
              </div>
              <div class="bubble"></div>
              <div class="beaker">
                <div class="bath"></div>
              </div>
              <div class="arrow" id="fArrow">ä¾ Step æ“ä½œï¼šæŒ‰å£“ â†’ å¸æ¶² â†’ æ”¾æ¶² â†’ å¹å‡ºæ®˜æ¶²</div>
            </div>
          </div>

          <div class="notes">
            <h3>ğŸŸ¦ æ­£å‘å¸æ¶² Step èªªæ˜</h3>
            <ul id="fNotes">
              <li class="muted">Step 0ï¼šè«‹å…ˆç¢ºèªæ¶²é«”ç‚ºæ°´æ€§/ä½é»åº¦/ä¸æ˜“èµ·æ³¡ï¼Œæ‰ä½¿ç”¨æ­£å‘å¸æ¶²ã€‚</li>
              <li class="muted">Step 1ï¼šæŒ‰å£“è‡³ç¬¬ä¸€æ®µï¼Œå¸é ­æµ¸å…¥æ¶²é¢ä¸‹ã€‚</li>
              <li class="muted">Step 2ï¼šç·©æ…¢æ”¾é–‹æŒ‰éˆ•å¸æ¶²ï¼ˆé¿å…éå¿«é€ æˆæ°£æ³¡ï¼‰ã€‚</li>
              <li class="muted">Step 3ï¼šç§»è‡³å®¹å™¨æ”¾æ¶²ï¼Œå…ˆæŒ‰è‡³ç¬¬ä¸€æ®µé‡‹æ”¾ï¼Œå†æŒ‰è‡³ç¬¬äºŒæ®µå¹å‡ºæ®˜æ¶²ã€‚</li>
            </ul>

            <div class="legend">
              <span class="chip"><span class="dot" aria-hidden="true"></span>æ­£å‘å¸æ¶²ï¼ˆè—è‰²ï¼‰</span>
              <span class="chip" style="border-color:rgba(255,204,102,.35); background:rgba(255,204,102,.10);">æ–°æ‰‹é‡é»ï¼šæ”¾æ¶²è¦ã€Œç¬¬äºŒæ®µå¹å‡ºã€</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Reverse -->
      <section class="card">
        <div class="cardHead">
          <div class="title">
            <div class="tag reverse">
              <span class="dot" aria-hidden="true"></span>
              <span>åå‘å¸æ¶²ï¼ˆReverse Pipettingï¼‰</span>
            </div>
            <div class="subtitle">é©ç”¨ï¼šé«˜é»åº¦ã€æ˜“èµ·æ³¡ã€å¾®é‡é«˜ç²¾åº¦ã€‚é‡é»ï¼šç¬¬äºŒæ®µå¸æ¶²ï¼Œåªåˆ°ç¬¬ä¸€æ®µæ”¾æ¶²ï¼ˆå¸é ­æ®˜æ¶²ä¸å¹å‡ºï¼‰ã€‚</div>
          </div>
          <div class="pill">é¡è‰²ï¼šğŸŸ§ æ©˜è‰²æµç¨‹</div>
        </div>

        <div class="cardBody">
          <div class="viz frame reverse">
            <div class="callout" id="rMode">ğŸŸ§ åå‘</div>
            <div class="scene" id="sceneReverse" data-step="0">
              <div class="label">å¸é ­ / æ´»å¡ç¤ºæ„</div>
              <div class="plunger"></div>
              <div class="tube">
                <div class="liquid reverse" id="rTubeLiquid"></div>
              </div>
              <div class="tip">
                <div class="liquid reverse" id="rTipLiquid"></div>
              </div>
              <div class="bubble"></div>
              <div class="beaker">
                <div class="bath"></div>
              </div>
              <div class="arrow" id="rArrow">ä¾ Step æ“ä½œï¼šç¬¬äºŒæ®µå¸ â†’ ç¬¬ä¸€æ®µæ”¾ â†’ ä¸å¹æ®˜æ¶²</div>
            </div>
          </div>

          <div class="notes">
            <h3>ğŸŸ§ åå‘å¸æ¶² Step èªªæ˜</h3>
            <ul id="rNotes">
              <li class="muted">Step 0ï¼šè‹¥æ¶²é«”é»ç¨ /æ˜“èµ·æ³¡/éœ€æ›´é«˜å®šé‡ç©©å®šæ€§ï¼Œä½¿ç”¨åå‘å¸æ¶²ã€‚</li>
              <li class="muted">Step 1ï¼šç›´æ¥æŒ‰å£“è‡³ç¬¬äºŒæ®µï¼Œå¸é ­æµ¸å…¥æ¶²é¢ä¸‹ã€‚</li>
              <li class="muted">Step 2ï¼šç·©æ…¢æ”¾é–‹æŒ‰éˆ•å¸æ¶²ï¼ˆæœƒå¤šå¸å…¥é«”ç©ï¼Œç”¨æ–¼è£œå„Ÿé™„è‘—èˆ‡æ³¡æ²«ï¼‰ã€‚</li>
              <li class="muted">Step 3ï¼šç§»è‡³å®¹å™¨æ”¾æ¶²ã€ŒåªæŒ‰åˆ°ç¬¬ä¸€æ®µã€ï¼Œå¸é ­å…§æ®˜æ¶²ä¿ç•™ï¼Œä¸å¯å¹å‡ºã€‚</li>
            </ul>

            <div class="legend">
              <span class="chip r"><span class="dot" aria-hidden="true"></span>åå‘å¸æ¶²ï¼ˆæ©˜è‰²ï¼‰</span>
              <span class="chip" style="border-color:rgba(255,107,107,.35); background:rgba(255,107,107,.12);">é—œéµè­¦ç¤ºï¼šåå‘å¸æ¶²ã€Œä¸å¯å¹å‡ºæ®˜æ¶²ã€</span>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer>
      <div>æ“ä½œæé†’ï¼šè‹¥å‡ºç¾æ°£æ³¡æˆ–é»ç¨ æ¶²é«”ç§»æ¶²åå·®ï¼Œè«‹å„ªå…ˆæª¢æŸ¥æ˜¯å¦ã€Œé¸éŒ¯å¸æ¶²æ¨¡å¼ã€æˆ–ã€Œæ”¾æ¶²æ®µä½æ“ä½œéŒ¯èª¤ã€ã€‚</div>
      <div>æª”æ¡ˆä½¿ç”¨ï¼šå°‡æœ¬é å­˜æˆ <code>micropipette_animation.html</code>ï¼Œç”¨ Chrome/Edge ç›´æ¥é–‹å•Ÿï¼ˆå¯é›¢ç·šï¼‰ã€‚</div>
    </footer>
  </div>

  <script>
    // Global step controller: 0..3
    const stepBadge = document.getElementById("stepBadge");
    const scenes = {
      forward: document.getElementById("sceneForward"),
      reverse: document.getElementById("sceneReverse")
    };

    const fTipLiquid = document.getElementById("fTipLiquid");
    const fTubeLiquid = document.getElementById("fTubeLiquid");
    const rTipLiquid = document.getElementById("rTipLiquid");
    const rTubeLiquid = document.getElementById("rTubeLiquid");

    let step = 0;
    let playing = false;
    let timer = null;

    const stepText = [
      "Step 0ï¼šé¸æ“‡å¸æ¶²æ–¹å¼",
      "Step 1ï¼šæŒ‰å£“èˆ‡æµ¸å…¥ï¼ˆæ­£å‘ç¬¬ä¸€æ®µ / åå‘ç¬¬äºŒæ®µï¼‰",
      "Step 2ï¼šç·©æ…¢å¸æ¶²ï¼ˆé¿å…æ°£æ³¡ / è£œå„Ÿé™„è‘—ï¼‰",
      "Step 3ï¼šæ”¾æ¶²ï¼ˆæ­£å‘å¯å¹å‡ºæ®˜æ¶² / åå‘ä¸å¯å¹å‡ºï¼‰"
    ];

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function applyForwardVisual(s){
      // step 0: empty
      // step 1: press + dip (still empty)
      // step 2: suction -> liquid rises
      // step 3: dispense -> empty (after blow out)
      if(s === 0){
        fTipLiquid.style.height = "0%";
        fTubeLiquid.style.height = "0%";
        scenes.forward.classList.remove("bubbleOn");
      }
      if(s === 1){
        fTipLiquid.style.height = "0%";
        fTubeLiquid.style.height = "0%";
        // show bubble hint if user releases too fast (training cue) - keep OFF by default
        scenes.forward.classList.remove("bubbleOn");
      }
      if(s === 2){
        fTipLiquid.style.height = "52%";
        fTubeLiquid.style.height = "34%";
        scenes.forward.classList.remove("bubbleOn");
      }
      if(s === 3){
        fTipLiquid.style.height = "0%";
        fTubeLiquid.style.height = "0%";
        scenes.forward.classList.remove("bubbleOn");
      }
    }

    function applyReverseVisual(s){
      // reverse draws more than dispenses; leaves residual in tip/tube at step 3
      if(s === 0){
        rTipLiquid.style.height = "0%";
        rTubeLiquid.style.height = "0%";
        scenes.reverse.classList.remove("bubbleOn");
      }
      if(s === 1){
        rTipLiquid.style.height = "0%";
        rTubeLiquid.style.height = "0%";
        scenes.reverse.classList.remove("bubbleOn");
      }
      if(s === 2){
        rTipLiquid.style.height = "68%";
        rTubeLiquid.style.height = "44%";
        scenes.reverse.classList.remove("bubbleOn");
      }
      if(s === 3){
        // dispensed only to first stop -> leave residual
        rTipLiquid.style.height = "22%";
        rTubeLiquid.style.height = "14%";
        scenes.reverse.classList.remove("bubbleOn");
      }
    }

    function render(){
      step = clamp(step, 0, 3);

      stepBadge.textContent = stepText[step];

      scenes.forward.dataset.step = String(step);
      scenes.reverse.dataset.step = String(step);

      applyForwardVisual(step);
      applyReverseVisual(step);
    }

    function stopPlay(){
      playing = false;
      clearInterval(timer);
      timer = null;
      document.getElementById("playBtn").textContent = "è‡ªå‹•æ’­æ”¾";
    }

    function startPlay(){
      if(playing) return;
      playing = true;
      document.getElementById("playBtn").textContent = "åœæ­¢æ’­æ”¾";
      timer = setInterval(() => {
        if(step < 3){ step += 1; render(); }
        else { stopPlay(); }
      }, 1300);
    }

    document.getElementById("prevBtn").addEventListener("click", () => {
      stopPlay();
      step -= 1;
      render();
    });

    document.getElementById("nextBtn").addEventListener("click", () => {
      stopPlay();
      step += 1;
      render();
    });

    document.getElementById("resetBtn").addEventListener("click", () => {
      stopPlay();
      step = 0;
      render();
    });

    document.getElementById("playBtn").addEventListener("click", () => {
      if(playing) stopPlay();
      else startPlay();
    });

    // Initial render
    render();
  </script>
</body>
</html>
